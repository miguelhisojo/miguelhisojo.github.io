<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Miguel Angel Hisojo">

  
  
  
    
  
  <meta name="description" content="Wireless speakers, internet signals, headset, etc., are part of our daily life. Nevertheless, understanding how it works is essential to create new gadgets. This post will focus on FSK modulation. A digital modulation technique, present in our daily lives.">

  
  <link rel="alternate" hreflang="en-us" href="https://miguelhisojo.github.io/project/inside-a-wireless-transmission/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu7aa7cabf48a670437f832f5d74b422e7_29465_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu7aa7cabf48a670437f832f5d74b422e7_29465_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://miguelhisojo.github.io/project/inside-a-wireless-transmission/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="MIGUEL ANGEL HISOJO">
  <meta property="og:url" content="https://miguelhisojo.github.io/project/inside-a-wireless-transmission/">
  <meta property="og:title" content="Inside a Wireless Transmission | MIGUEL ANGEL HISOJO">
  <meta property="og:description" content="Wireless speakers, internet signals, headset, etc., are part of our daily life. Nevertheless, understanding how it works is essential to create new gadgets. This post will focus on FSK modulation. A digital modulation technique, present in our daily lives."><meta property="og:image" content="https://miguelhisojo.github.io/project/inside-a-wireless-transmission/featured.png">
  <meta property="twitter:image" content="https://miguelhisojo.github.io/project/inside-a-wireless-transmission/featured.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-08-12T16:26:58&#43;02:00">
    
    <meta property="article:modified_time" content="2020-08-12T16:26:58&#43;02:00">
  

  


    









<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://miguelhisojo.github.io/project/inside-a-wireless-transmission/"
  },
  "headline": "Inside a Wireless Transmission",
  
  "image": [
    "https://miguelhisojo.github.io/project/inside-a-wireless-transmission/featured.png"
  ],
  
  "datePublished": "2020-08-12T16:26:58+02:00",
  "dateModified": "2020-08-12T16:26:58+02:00",
  
  "author": {
    "@type": "Person",
    "name": "Miguel Hisojo"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "MIGUEL ANGEL HISOJO",
    "logo": {
      "@type": "ImageObject",
      "url": "https://miguelhisojo.github.io/images/icon_hu7aa7cabf48a670437f832f5d74b422e7_29465_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Wireless speakers, internet signals, headset, etc., are part of our daily life. Nevertheless, understanding how it works is essential to create new gadgets. This post will focus on FSK modulation. A digital modulation technique, present in our daily lives."
}
</script>

  

  


  


  





  <title>Inside a Wireless Transmission | MIGUEL ANGEL HISOJO</title>

</head>
<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  









<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">MIGUEL ANGEL HISOJO</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">MIGUEL ANGEL HISOJO</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-center" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Portfolio</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article article-project">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Inside a Wireless Transmission</h1>

  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span >Miguel Hisojo</span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Aug 12, 2020
  </span>
  

  

  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/signal-processing/">Signal processing</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <p><img src="featured.png" alt="wireless.png"></p>
<h1 id="how-your-wireless-speaker-works">How your wireless speaker works?</h1>
<h2 id="an-fsk-simulation">An FSK simulation</h2>
<p>Mobile phones, internet access, and to listening music on the radio are normal activities for most of us. When any of those activities take place, we impose a data signal wave over a carrier signal wave, generally of higher frequency. This process is called modulation.</p>
<p>Digital Modulation provides more information capacity, high data security, quicker system availability with great quality communication.</p>
<p>Frequency Shift Keying (FSK) is one of the most common modulation techniques. FSK modulates a signal so it can be transmitted wirelessly. Bluetooth, uses Gaussian FSK modulation, a slightly different version of FSK. This notebook aims to provide an overview of how data transmission works over FSK.</p>
<h1 id="system-description">System description.</h1>
<h2 id="transmitter">Transmitter</h2>
<p>FSK modulation uses two frequencies to represent binary values of 1 and 0, so our input data d will be converted to these frequencies. Our transmitter (tx) will simply create two distinct frequencies based on a data value, by using a voltage-controlled oscillator (VCO).</p>






  
  











<figure id="figure-fsk-transmitter">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/tx_fsk_hud1407d304ac3eeff418321e6aa039019_20095_2000x2000_fit_lanczos_2.png" data-caption="FSK Transmitter">


  <img data-src="/project/inside-a-wireless-transmission/tx_fsk_hud1407d304ac3eeff418321e6aa039019_20095_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="816" height="283">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    FSK Transmitter
  </figcaption>


</figure>

<p>The <em>transmitted signal</em> <strong>s(t)</strong> is defined as</p>
<p>$$ s(t) = A \cos(2 \pi  \omega (t) ) $$</p>
<p>Where <strong>A</strong> is the signal amplitude and $\omega (t)$ is the output of the voltage-controlled oscillator (VCO) defined as:</p>
<p>$$   f_c + m(t)  = \begin{cases}
1  &amp;  f_c - f_{dev} &amp; \\<br>
0  &amp;  f_c + f_{dev}
\end{cases}
$$</p>
<p>where $ f_{dev}$ is the frequency deviation, so, our output signal is represented as,</p>
<p>$$
s(t) = A \cos(2 \pi  (f_c  + m(t)) * t )
$$</p>
<h1 id="lets-code">Let&rsquo;s code.</h1>
<pre><code class="language-python"># Import the libraries necessary for our simulation
import numpy as np
import pylab as pl
from numpy.random import sample
import scipy.signal as signal
import scipy.signal.signaltools as sigtool
pl.rcParams['figure.figsize'] = [15, 5]    # Standard size for all plots to improve visualization.
pl.rcParams['figure.dpi'] = 300
#pl.figure(figsize=(30, 10), dpi= 80)
</code></pre>
<pre><code class="language-python">#SIMULATED VALUES
Fc = 1000       #carrier frequency of 1kHz
Fbit = 50       #bitrate of data
Fdev = 500      #frequency deviation
N = 64          #Size of the array of bits that we will transmit
A = 1           #tx ignal amplitude
Fs = 10000      #sampling frequency
A_n = 0.1       #noise peak amplitude
N_pbits = 10    #number of bits to print in plots

</code></pre>
<pre><code class="language-python">#generate some random data for testing
d = np.random.randint(0,1+1,N)

print('d:  \n',d)


</code></pre>
<pre><code>d:  
 [0 0 1 1 1 1 1 0 1 0 1 0 0 1 0 0 1 1 0 1 1 1 1 1 1 1 0 0 0 0 0 1 1 0 0 1 1
 0 1 1 1 0 1 0 1 1 1 0 1 0 0 0 1 1 1 0 1 0 1 1 1 0 0 0]
</code></pre>
<p>The voltage-controlled oscillator(VCO) converts the bit stream to a sine wave, with a frequency-dependent value on whether the bit is a 1 or 0. The bit stream is then extended to match the sampling frequency.</p>
<pre><code class="language-python">t = np.arange(0,float(N)/float(Fbit),1/float(Fs), dtype=np.float)

#extend the d to account for the bitrate and convert 0/1 to frequency
m = np.zeros(0).astype(float)
zero=int(Fc+Fdev)
one=int(Fc-Fdev)
fsbit=int(Fs/Fbit)

for bit in d:
   if bit == 0:
       m=np.hstack((m,np.multiply(np.ones(int(Fs/Fbit)),Fc+Fdev)))
   else:
       m=np.hstack((m,np.multiply(np.ones(int(Fs/Fbit)),Fc-Fdev)))
print(len(m))
        
#calculate the output of the VCO
y=np.zeros(0)
y=A * np.cos(2*np.pi*np.multiply(m,t))

pl.plot(t[0:int(Fs*N_pbits/Fbit )],y[0:int(Fs*N_pbits/Fbit)])
pl.xlabel('Time (s)')
pl.ylabel('Amplitude (V)')
pl.title('Amplitude of carrier vs time')

</code></pre>
<pre><code>12800
</code></pre>






  
  











<figure id="figure-amplitude-of-carrier-vs-time">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_6_2_hu9a5f7628b6edba1e053dfcede6216648_590858_2000x2000_fit_lanczos_2.png" data-caption="Amplitude of carrier vs time">


  <img data-src="/project/inside-a-wireless-transmission/FSK_6_2_hu9a5f7628b6edba1e053dfcede6216648_590858_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3766" height="1385">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Amplitude of carrier vs time
  </figcaption>


</figure>

<p>Frequency measurements of the FSK signal are usually stated in terms of “shift” and
center frequency. The shift is the frequency difference between the mark and space
frequencies. Shifts are usually in the range of 50 to 1000 Hertz. The nominal center
frequency is halfway between the mark and space frequencies.</p>
<p>Frequency Shift Property of the Fourier Transform:</p>
<p>$$
\mathscr F [x(t) \cos (2\pi f_c t)] = \frac{1}{2} X (f-f_c) + \frac{1}{2} X (f+f_c)
$$</p>
<pre><code class="language-python">#visualize data in time and frequency domain
def visualize_data(y):
    N_FFT = float(len(y))                             
    f = np.arange(0,Fs/2,Fs/N_FFT) 
    w = np.hanning(len(y))                           
    y_f = np.fft.fft(np.multiply(y,w))
    y_f = 10*np.log10(np.abs(y_f[0:int(N_FFT/2)]/N_FFT))
    return y_f,w ,f,N_FFT
</code></pre>
<pre><code class="language-python">y_f,w,f,N_FFT=visualize_data(y)
</code></pre>
<pre><code class="language-python">pl.plot(t[0:int(Fs*N_pbits/Fbit)],m[0:int(Fs*N_pbits/Fbit)])
pl.xlabel('Time (s)')
pl.ylabel('Frequency (Hz)')
pl.title('Original VCO output versus time')
</code></pre>






  
  











<figure id="figure-original-vco-output-versus-time">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_10_1_huae0cf49a9d740d065a043df239199d88_75249_2000x2000_fit_lanczos_2.png" data-caption="Original VCO output versus time">


  <img data-src="/project/inside-a-wireless-transmission/FSK_10_1_huae0cf49a9d740d065a043df239199d88_75249_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3744" height="1385">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Original VCO output versus time
  </figcaption>


</figure>

<pre><code class="language-python">pl.plot(f[0:int((Fc+Fdev*2)*N_FFT/Fs)],y_f[0:int((Fc+Fdev*2)*N_FFT/Fs)])
pl.xlabel('Frequency (Hz)')
pl.ylabel('Amplitude (dB)')
pl.title('Spectrum')
</code></pre>






  
  











<figure id="figure-signal-spectrum">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_11_1_hub440c18a394144878b79c73b377cbd11_301000_2000x2000_fit_lanczos_2.png" data-caption="Signal spectrum">


  <img data-src="/project/inside-a-wireless-transmission/FSK_11_1_hub440c18a394144878b79c73b377cbd11_301000_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3726" height="1385">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Signal spectrum
  </figcaption>


</figure>

<h2 id="the-channel">The channel</h2>
<p>The signal acquires noise when passing through the channel. The thermal noise $n(t)$ is assumed to be complex additive white Gaussian (AWGN) with zero mean and power spectral density $\frac{N_0}{2}$.</p>
<p>The received signal can be expressed as:
$$
r(t)= s(t)+n(t)
$$</p>
<p>so,</p>
<p>$$
y(t)= A \cos(2 \pi  (f_c  + m(t)) * t ) +n(t)
$$</p>
<p>If the noise becomes too strong, or if the amplitude of the signal becomes too weak, the data cannot be demodulated.</p>
<p>In our simulation, we will set the noise amplitude of 0.1 which creates a signal-to-noise ratio of $~14dB$. Notice the noise in the time domain corrupting the signal in the following plots.</p>
<pre><code class="language-python">#create some noise
noise = (np.random.randn(len(y))+1)*A_n
snr = 10*np.log10(np.mean(np.square(y)) / np.mean(np.square(noise)))
print(&quot;SNR = %fdB&quot; % snr)
y=np.add(y,noise)


</code></pre>
<pre><code class="language-python">    SNR = 13.961869dB
</code></pre>
<pre><code class="language-python">y_f,w,f,N_FFT=visualize_data(y)

pl.plot(t[0:int(Fs*N_pbits/Fbit )],y[0:int(Fs*N_pbits/Fbit)])
pl.xlabel('Time (s)')
pl.ylabel('Amplitude (V)')
pl.title('Amplitude of carrier vs time')
print(int(Fs*N_pbits/Fbit ))
print(int(Fs*N_pbits/Fbit))

</code></pre>
<pre><code class="language-python">    2000
    2000

</code></pre>






  
  











<figure >


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_15_1_hu2369cf561e83921874f140cbf41eae34_664981_2000x2000_fit_lanczos_2.png" >


  <img data-src="/project/inside-a-wireless-transmission/FSK_15_1_hu2369cf561e83921874f140cbf41eae34_664981_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3739" height="1385">
</a>



</figure>

<pre><code class="language-python">pl.plot(f[0:int((Fc+Fdev*2)*N_FFT/Fs)],y_f[0:int((Fc+Fdev*2)*N_FFT/Fs)])
pl.xlabel('Frequency (Hz)')
pl.ylabel('Amplitude (dB)')
##pl.title('Spectrum of the received signal')
</code></pre>






  
  











<figure id="figure-amplitude-db">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_16_1_hufac686eac529db590ccb33989eeadd4a_347936_2000x2000_fit_lanczos_2.png" data-caption="Amplitude (dB)">


  <img data-src="/project/inside-a-wireless-transmission/FSK_16_1_hufac686eac529db590ccb33989eeadd4a_347936_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3726" height="1325">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Amplitude (dB)
  </figcaption>


</figure>

<h2 id="the-receiver">The receiver</h2>






  
  











<figure id="figure-a-receiver-architecture">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/rx_fsk_huf64ced1534b2c5fc2a87c6241a7fcadf_29258_2000x2000_fit_lanczos_2.png" data-caption="A receiver architecture">


  <img data-src="/project/inside-a-wireless-transmission/rx_fsk_huf64ced1534b2c5fc2a87c6241a7fcadf_29258_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="816" height="349">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    A receiver architecture
  </figcaption>


</figure>

<p>Our receiver will take concepts from <em>analog FM</em>, which can be demodulated by converting the <strong>frequency changes to amplitude changes.</strong>
Typically, FSK demodulation utilizes an analog differentiator in order to separate the data signal from the carrier frequency, followed by an envelope detector. This procedure is simple and low-power consuming.</p>
<p>$$
\frac{dy}{dt} = -A 2\pi \left ( f + m(t) + t * \frac{d m(t)}{dt} \right) \sin (2 \pi (fc + m(t)) * t )+ \frac{d n(t)}{dt}
$$</p>
<p>Combining the amplitudes in one term and taking into account that the term $\frac{d m(t)}{dt} = 0$ due to the constant phase change we have:</p>
<p>$$
\frac{dy}{dt} = A 2\pi \left ( f + m(t)  \right) \sin (2 \pi (fc + m(t)) * t )+ \frac{d n(t)}{dt}
$$</p>
<p>In our simulation, we can ignore the phase shift, since it is constant. Nevertheless, in real life, a clock recovery or bit synchronization scheme must be applied. The differentiator is simple and is just a discrete differentiation function, it can be implemented as:</p>
<pre><code class="language-python">y_diff = np.diff(y,1)
print(y)
</code></pre>
<pre><code class="language-python">    [ 1.15418648  0.56043178 -0.2061984  ... -0.76277215 -0.0358485
      0.64900518]
</code></pre>
<p>The envelope detector separates the high-frequency carrier from the low-frequency digital data modulated onto the amplitude, this is done by using a Hilbert transform.
After the envelope detection, the signal is low-pass filtered using a 100 tap FIR filter with a cutoff frequency of $2*bitrate$.</p>
<pre><code class="language-python">######################################################
# Envelope detector and low-pass filter
######################################################
y_env = np.abs(sigtool.hilbert(y_diff))
h=signal.firwin( numtaps=100, cutoff=Fbit*2, nyq=Fs/2)
y_low_filt=signal.lfilter( h, 1.0, y_env)

#data after adding noise
N_FFT = float(len(y_low_filt))
f = np.arange(0,Fs/2,Fs/N_FFT)
w = np.hanning(len(y_low_filt))
y_f = np.fft.fft(np.multiply(y_low_filt,w))
y_f = 10*np.log10(np.abs(y_f[0:int(N_FFT/2)]/N_FFT))


pl.plot(t[0:int(Fs*N_pbits/Fbit)],m[0:int(Fs*N_pbits/Fbit)])
pl.xlabel('Time (s)')
pl.ylabel('Frequency (Hz)')
pl.title('Original VCO output vs. time')
</code></pre>






  
  











<figure id="figure-original-vco-output-vs-time">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_20_1_hue703479703461df58f4a4a7ce5c4487e_73617_2000x2000_fit_lanczos_2.png" data-caption="Original VCO output vs. time">


  <img data-src="/project/inside-a-wireless-transmission/FSK_20_1_hue703479703461df58f4a4a7ce5c4487e_73617_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3744" height="1385">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Original VCO output vs. time
  </figcaption>


</figure>

<pre><code class="language-python">pl.plot(t[0:int(Fs*N_pbits/Fbit)],np.abs(y[0:int(Fs*N_pbits/Fbit)]))
pl.plot(t[0:int(Fs*N_pbits/Fbit)],y_low_filt[0:int(Fs*N_pbits/Fbit)],'r',linewidth=3.0)
pl.xlabel('Time (s)')
pl.ylabel('Amplitude (V)')
pl.title('Filter signal and unfiltered signal vs. time')
</code></pre>
















<figure id="figure-filter-signal-and-unfiltered-signal-vs-time">


  <a data-fancybox="" href="/FSK_21_1.png" data-caption="Filter signal and unfiltered signal vs. time">


  <img src="/FSK_21_1.png" alt=""  >
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Filter signal and unfiltered signal vs. time
  </figcaption>


</figure>

<pre><code class="language-python">pl.plot(f[0:int((Fc+Fdev*2)*N_FFT/Fs)],y_f[0:int((Fc+Fdev*2)*N_FFT/Fs)])
pl.xlabel('Frequency (Hz)')
pl.ylabel('Amplitude (dB)')
pl.title('Spectrum')
</code></pre>






  
  











<figure id="figure-sectrum">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_22_1_hue09299c3cdbe5a4fe7533275f8371d5c_233814_2000x2000_fit_lanczos_2.png" data-caption="Sectrum">


  <img data-src="/project/inside-a-wireless-transmission/FSK_22_1_hue09299c3cdbe5a4fe7533275f8371d5c_233814_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3753" height="1385">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Sectrum
  </figcaption>


</figure>

<p>The slicer takes the mean of the entire filtered signal, and uses this as a decision threshold, to decide if a bit is a 1 or a 0.
The decision is done at the center of the bit period. The result is saved to an array and compared to the original, to find bit errors.
The bit error percentage is printed to the console.</p>
<pre><code class="language-python">#calculate the mean of the signal
mean = np.mean(y_low_filt)
#if the mean of the bit period is higher than the mean, the data is a 0
sampled_signal = y_low_filt[int(Fs/Fbit/2):len(y_low_filt):int(Fs/Fbit)]

print(sampled_signal)
pl.plot(sampled_signal)
</code></pre>
<pre><code>[0.94154175 0.92515726 0.35223853 0.33979885 0.35294071 0.36287615
 0.34675628 0.90095976 0.35453665 0.92090498 0.34720447 0.91611558
 0.94528336 0.34417705 0.90435061 0.91620578 0.34844842 0.3388747
 0.94404786 0.34364565 0.35304868 0.356202   0.35102639 0.34859071
 0.33627503 0.3383037  0.93701699 0.92527765 0.91127889 0.92546922
 0.90017475 0.34158569 0.34268534 0.92516404 0.91248606 0.33776427
 0.3454749  0.93246055 0.34503893 0.34917072 0.35666379 0.90326687
 0.35272848 0.92576273 0.35310379 0.34613621 0.38067857 0.88376517
 0.35971779 0.88856201 0.93363287 0.89404895 0.34008713 0.34691357
 0.33626758 0.90701975 0.33288698 0.91293492 0.34244479 0.36333365
 0.33606437 0.95159041 0.922426   0.93333146]
</code></pre>






  
  











<figure id="figure-received-sequence">


  <a data-fancybox="" href="/project/inside-a-wireless-transmission/FSK_24_2_hu1835ddf08f3aeca25973d7fb184aace6_236670_2000x2000_fit_lanczos_2.png" data-caption="Received sequence.">


  <img data-src="/project/inside-a-wireless-transmission/FSK_24_2_hu1835ddf08f3aeca25973d7fb184aace6_236670_2000x2000_fit_lanczos_2.png" class="lazyload" alt="" width="3646" height="1267">
</a>


  
  
  <figcaption data-pre="Figure " data-post=":" class="numbered">
    Received sequence.
  </figcaption>


</figure>

<pre><code class="language-python">rx_data=[]
[rx_data.append(0) if bit &gt; mean else rx_data.append(1) for bit in sampled_signal]
        
bit_error=0
for i in range(0,len(d)):
    if rx_data[i] != d[i]:
        bit_error+=1
               
print (&quot;bit errors = %d&quot; % bit_error)
print (&quot;bit error percent = %4.2f%%&quot; % (float(bit_error)/float(N)*100) )
</code></pre>
<pre><code>bit errors = 0
bit error percent = 0.00%
</code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>FSK is a digital modulation technique to increase the frequency characteristics of the input binary signal. By FSK modulation technique we can achieve error-free communication in a few digital applications.
Nevertheless, FSK has finite data rate and consumes more bandwidth can be overcome by the QAM, which is known as quadrature amplitude modulation. It is the combination of amplitude modulation and phase modulation.</p>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/signal-processing/">Signal processing</a>
  
  <a class="badge badge-light" href="/tag/data-science/">Data Science</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://miguelhisojo.github.io/project/inside-a-wireless-transmission/&amp;text=Inside%20a%20Wireless%20Transmission" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://miguelhisojo.github.io/project/inside-a-wireless-transmission/&amp;t=Inside%20a%20Wireless%20Transmission" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://miguelhisojo.github.io/project/inside-a-wireless-transmission/&amp;title=Inside%20a%20Wireless%20Transmission" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  


  












  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/project/web-scraping/">WEB SCRAPING</a></li>
      
    </ul>
  </div>
  





    <div class="project-related-pages content-widget-hr">
      
      

      
      
      

      
      
      

      
      
      
    </div>
  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.66c553246b0f279a03be6e5597f72b52.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    Published with
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic Website Builder</a>
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
